(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c,o,r,i,a,s,d,u=n(0),l=n.n(u),j=n(33),b=n.n(j),h=(n(44),n(39)),x=n(4),p=n(3),O=n(17),f=n(6),g=n(5),m=n.n(g),v=n(2),y=Object(u.createContext)(null),C=Object(u.createContext)([]),k=Object(u.createContext)([]),w=Object(u.createContext)([]),P="https://lit-earth-99012.herokuapp.com",E=new Date,S=new Date(E-864e5).toLocaleDateString(),F=n(1),z=v.c.div(c||(c=Object(p.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  background-color:",";\n  box-sizing: border-box;\n"])),(function(e){return e.theme.colors.grey})),D=v.c.div(o||(o=Object(p.a)(["\n  display: flex;\n  align-items: center;\n"]))),M=v.c.div(r||(r=Object(p.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 64px;\n  }\n"])),D),T=Object(v.c)(O.b)(i||(i=Object(p.a)(["\n  padding: 10px;\n  height: 64px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  font-size: 16px;\n\n  ","\n"])),(function(e){return e.$active&&"\n    background: ".concat((function(e){return e.theme.colors.darkBlue}),";\n    ")})),B=Object(v.c)(O.b)(a||(a=Object(p.a)(["\n  width: 120px;\n  padding: 10px; \n  font-size: 26px;\n  font-weight: bold;\n  color: ",";\n  text-decoration: none;\n\n"])),(function(e){return e.theme.colors.darkGrey})),N=v.c.div(s||(s=Object(p.a)(["\n  width: 24%;\n  padding: 5px; \n  height: 40px;\n  color: ",";\n  font-size: 14px;\n  font-weight: bolder;\n  box-sizing: border-box;\n"])),(function(e){return e.theme.colors.darkBlue})),A=v.c.div(d||(d=Object(p.a)(["\n  padding: 10px;\n  height: 64px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  font-size: 16px;\n\n  ","\n"])),(function(e){return e.$active&&"\n    background: ".concat((function(e){return e.theme.colors.darkBlue}),";\n    ")}));var U,G,$,I,L,_,R,q,J,Y,H,K,Q,V,W,X,Z,ee,te,ne,ce,oe,re,ie,ae,se,de=function(){var e=Object(f.f)(),t=Object(u.useContext)(y),n=t.user,c=t.setUser,o=Object(u.useContext)(k),r=(o.myFav2,o.setMyFav2);return m.a.defaults.withCredentials=!0,Object(F.jsxs)(z,{children:[Object(F.jsxs)(M,{children:[Object(F.jsx)(B,{to:"/",children:"\u73a9\u80a1\u55b5"}),Object(F.jsx)(N,{children:n?"\u4f60\u597d "+n.username:"\u8acb\u767b\u5165"}),Object(F.jsxs)(D,{children:[Object(F.jsx)(T,{to:"/",$active:"/"===e.pathname,children:"\u8a0e\u8ad6"}),Object(F.jsx)(T,{to:"/search",$active:"/search"===e.pathname,children:"\u67e5\u8a62"})]})]}),Object(F.jsxs)(D,{children:[!n&&Object(F.jsx)(T,{to:"/register",$active:"/register"===e.pathname,children:"\u8a3b\u518a"}),!n&&Object(F.jsx)(T,{to:"/login",$active:"/login"===e.pathname,children:"\u767b\u5165"}),n&&Object(F.jsx)(T,{to:"/profile",$active:"/profile"===e.pathname,children:"\u500b\u4eba"}),n&&Object(F.jsx)(A,{onClick:function(){c(null),m.a.get("".concat(P,"/logout")).then((function(e){console.log("GET LOGOUT",e),r([])}))},children:"\u767b\u51fa"})]})]})},ue=v.c.h1(U||(U=Object(p.a)(["\ncolor: ",";\nmargin: 30px;\n"])),(function(e){return e.theme.colors.darkGrey})),le=v.c.input(G||(G=Object(p.a)(["\nwidth: 75%;\nheight: 50px;\nmargin: 0px 3px 8px 3px;\nfont-size: 20px;\nborder: 0px;\nborder-radius: 8px;\n"]))),je=v.c.div($||($=Object(p.a)(["\ndisplay: flex;\njustify-content: center;\nwidth: 75%;\nheight: 40px;\nmargin: 0 auto;\nfont-size: 20px;\nfont-weight: bolder;\nborder: 0px;\nborder-radius: 8px;\ncolor: ",";\n"])),(function(e){return e.theme.colors.darkGrey})),be=v.c.button(I||(I=Object(p.a)(["\nwidth: 78%;\nmargin: 40px 2px 20px 2px;\nheight: 50px;\nborder-radius: 8px;\ntext-align: center;\ncursor: pointer;\ncolor: white;\nfont-size: 20px;\nfont-weight: bolder;\nborder: 0px;\nbackground-color: ",";\n\n: hover {\n  color: ",";\n  background-color: white;\n}\n"])),(function(e){return e.theme.colors.darkBlue}),(function(e){return e.theme.colors.darkBlue})),he=v.c.button(L||(L=Object(p.a)(["\ncursor: pointer;\nwidth: 30%;\nmargin: 0px 5px 10px 5px;\nheight: 35px;\nborder-radius: 8px;\ntext-align: center;\ncursor: pointer;\ncolor: white;\nfont-weight: bolder;\nborder: none;\nbackground-color: ",";\n"])),(function(e){return e.theme.colors.darkBlue})),xe=v.c.div(_||(_=Object(p.a)(["\n  width: 100%;\n  margin-top: 20px;\n  padding: 10px;\n  border-radius: 8px;\n  background-color: white;\n  box-sizing: border-box;\n"]))),pe=v.c.div(R||(R=Object(p.a)(["\n  display: flex;\n  width: 100%;\n  padding: 5px;\n  box-sizing: border-box;\n"]))),Oe=v.c.span(q||(q=Object(p.a)(["\n  width: 60%;\n  padding: 0px 5px 0px 5px;\n  font-size : 28px;\n  font-weight: bold;\n  color: black;\n"]))),fe=v.c.span(J||(J=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 40%;\n  font-size: 14px;\n"]))),ge=v.c.div(Y||(Y=Object(p.a)(["\n  padding: 0px 5px 0px 5px;\n  display: flex;\n  justify-content: space-around;\n"]))),me=v.c.div(H||(H=Object(p.a)(["\n"]))),ve=Object(v.d)(K||(K=Object(p.a)(["\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n"]))),ye=v.c.div(Q||(Q=Object(p.a)(["\n  width: 100%;\n  margin-top: 20px;\n  padding: 10px;\n  border-radius: 8px;\n  border: 1px solid white;\n  box-sizing: border-box;\n  background-color: ",";\n  animation: 2s "," ease-out;\n"])),(function(e){return e.theme.colors.vividBlue}),ve),Ce=v.c.div(V||(V=Object(p.a)(["\n  width: 100%;\n  margin-top: 20px;\n  padding: 10px;\n  border-radius: 8px;\n  border: 1px solid white;\n  box-sizing: border-box;\n  background-color: pink;\n  animation: 10s "," ease-out;\n"])),ve),ke=v.c.div(W||(W=Object(p.a)(["\n  width: 360px;\n  margin: 0 auto;\n"]))),we=v.c.form(X||(X=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 350px;\n  margin-top: 16px;\n  border-radius: 8px;\n  background-color: white;\n"]))),Pe=v.c.textarea(Z||(Z=Object(p.a)(["\n  width: 80%;\n  margin-top: 20px;\n  margin-bottom: 10px;\n  border-radius: 8px;\n  border: 1px solid ",";\n  background-color: ",";\n"])),(function(e){return e.theme.colors.darkGrey}),(function(e){return e.theme.colors.grey})),Ee=v.c.textarea(ee||(ee=Object(p.a)(["\n  width: 80%;\n  margin-top: 10px;\n  margin-bottom: 20px;\n  border-radius: 8px;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.grey})),Se=v.c.div(te||(te=Object(p.a)(["\n  margin-top: 16px;\n"]))),Fe=v.c.div(ne||(ne=Object(p.a)(["\n  border-radius: 8px;\n  padding: 8px 16px;\n  background-color: white;\n\n  &:not(:first-child) {\n    margin-top: 12px;\n  }\n"]))),ze=v.c.div(ce||(ce=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid lightgrey;\n  padding-bottom: 4px;\n"]))),De=v.c.div(oe||(oe=Object(p.a)(["\n  color: black;\n"]))),Me=v.c.div(re||(re=Object(p.a)(["\n  font-size: 12px;\n"]))),Te=v.c.div(ie||(ie=Object(p.a)(["\n  width: 55%;\n  font-weight: bold;\n  font-size: 20px;\n"]))),Be=v.c.div(ae||(ae=Object(p.a)([""]))),Ne=v.c.div(se||(se=Object(p.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));function Ae(e){e.id;var t=e.author,n=e.time,c=e.title,o=e.content;return Object(F.jsxs)(Fe,{children:[Object(F.jsxs)(ze,{children:[Object(F.jsx)(Te,{children:c}),Object(F.jsxs)("div",{children:[Object(F.jsx)(De,{children:t}),Object(F.jsx)(Me,{children:n})]})]}),Object(F.jsx)(Be,{children:o})]})}var Ue,Ge,$e,Ie,Le,_e,Re=function(){var e=Object(u.useState)(!1),t=Object(x.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)([]),r=Object(x.a)(o,2),i=r[0],a=r[1],s=Object(u.useState)(""),d=Object(x.a)(s,2),l=d[0],j=d[1],b=Object(u.useState)(""),h=Object(x.a)(b,2),p=h[0],O=h[1],f=Object(u.useState)([{status:0,type:"",message:""}]),g=Object(x.a)(f,2),v=g[0],C=g[1],k=Object(u.useContext)(y),w=k.user;k.setUser,Object(u.useEffect)((function(){E()}),[]),Object(u.useEffect)((function(){if(v){var e=setTimeout((function(){C([])}),1800);return function(){return clearTimeout(e)}}}),[v]),Object(u.useEffect)((function(){n||(j(""),O(""))}),[n]);var E=function(){m.a.get("".concat(P,"/posts")).then((function(e){a(e.data)})).catch((function(e){C({status:1,type:"getRequest",message:"\u8f09\u5165\u7559\u8a00\u8cc7\u6599\u4f3c\u4e4e\u6709\u9ede\u72c0\u6cc1\uff1a".concat(e.message)})}))},S=function(){C([])};return Object(F.jsxs)(ke,{children:[n&&Object(F.jsx)(Ne,{children:"\u6b63\u5728\u9001\u51fa..."}),Object(F.jsx)(ue,{children:"\u767c\u8868\u4f60\u5c0d\u80a1\u5e02\u7684\u770b\u6cd5"}),Object(F.jsxs)(we,{onSubmit:function(){w?""!==p&&""!==l?(c(!0),m.a.post("".concat(P,"/create-post"),{inputTitle:l,inputBody:p}).then((function(e){console.log(e),c(!1),E()})).catch((function(e){c(!1),C({status:1,type:"postRequest",message:"\u9001\u51fa\u7559\u8a00\u6709\u9ede\u72c0\u6cc1\uff1a".concat(e.message)})}))):C({status:1,type:"empty",message:"\u8acb\u8f38\u5165\u8981\u767c\u8868\u7684\u5167\u5bb9\uff01"}):C({status:1,type:"notUser",message:"\u4f60\u9084\u6c92\u767b\u5165!"})},children:[Object(F.jsx)(Pe,{rows:3,placeholder:"\u8f38\u5165\u6a19\u984c...",value:l,onChange:function(e){j(e.target.value)},onFocus:S}),Object(F.jsx)(Ee,{rows:10,placeholder:"\u8f38\u5165\u5167\u5bb9...",value:p,onChange:function(e){O(e.target.value)},onFocus:S}),Object(F.jsx)(he,{children:"\u9001\u51fa\u7559\u8a00"})]}),1==v.status&&Object(F.jsx)(ye,{children:v.message}),Object(F.jsx)(Se,{children:i.map((function(e){return Object(F.jsx)(Ae,{id:e.id,author:e.username,title:e.title,content:e.body,time:new Date(e.createdAt).toLocaleString(),children:e.body},e.id)}))})]})},qe=n(38),Je=v.c.div(Ue||(Ue=Object(p.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Ye=v.c.div(Ge||(Ge=Object(p.a)(["\n  width: 360px;\n  margin: 0 auto;\n  padding-top: 35px;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.grey})),He=v.c.div($e||($e=Object(p.a)(["\n  width: 100%;\n"]))),Ke=v.c.input(Ie||(Ie=Object(p.a)(["\n  width: 75%;\n  height: 50px;\n  margin: 0px 3px 0px 3px;\n  font-size: 20px;\n  border: 0px;\n  border-radius: 8px;\n"]))),Qe=v.c.button(Le||(Le=Object(p.a)(["\n  width: 13%;\n  margin: 0px 3px 0px 3px;\n  height: 40px;\n  cursor: pointer;\n  color: white;\n  font-weight: bolder;\n  border: none;\n  border-radius: 8px;\n  background-color: ",";\n\n  : hover {\n    background-color: ",";\n  }\n"])),(function(e){return e.theme.colors.darkBlue}),(function(e){return e.theme.colors.vividBlue})),Ve=Object(v.c)(he)(_e||(_e=Object(p.a)(["\n  color: ",";\n  background-color: ","\n"])),(function(e){return e.theme.colors.darkBlue}),(function(e){return e.theme.colors.vividBlue}));var We=function(){var e=Object(u.useState)(!0),t=Object(x.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)(!1),r=Object(x.a)(o,2),i=r[0],a=r[1],s=Object(u.useState)(null),d=Object(x.a)(s,2),l=d[0],j=d[1],b=Object(u.useState)([{Code:"\u4ee3\u865f",Name:"\u80a1\u7968\u540d\u7a31",ClosingPrice:"",MonthlyAveragePrice:"",PE:"",Dividend:""}]),h=Object(x.a)(b,2),p=h[0],O=h[1],f=Object(u.useState)(!1),g=Object(x.a)(f,2),v=g[0],C=g[1],E=Object(u.useState)(!1),z=Object(x.a)(E,2),D=z[0],M=z[1],T=Object(u.useState)(!1),B=Object(x.a)(T,2),N=B[0],A=B[1],U=Object(u.useState)(!1),G=Object(x.a)(U,2),$=G[0],I=G[1],L=Object(u.useState)([{id:0,name:null,price:null}]),_=Object(x.a)(L,2),R=_[0],q=_[1],J=Object(u.useContext)(w),Y=J.infoCompleted,H=(J.setInfoCompleted,Object(u.useContext)(y)),K=H.user,Q=(H.setUser,Object(u.useContext)(k)),V=(Q.myFav2,Q.setMyFav2),W=Object(u.useRef)(1);return Object(u.useEffect)((function(){Y&&a(!0);var e=setTimeout((function(){c(!1)}),4e3);return function(){return clearTimeout(e)}}),[]),Object(u.useEffect)((function(){if($){var e=setTimeout((function(){I(!1)}),1800);return function(){return clearTimeout(e)}}}),[$]),Object(F.jsxs)("div",{children:[n&&Object(F.jsx)(Je,{children:"\u6b63\u5728\u5e6b\u60a8\u8f09\u51651102\u6a94\u53f0\u80a1\u4e2d..."}),!n&&Object(F.jsx)("div",{children:Object(F.jsxs)(Ye,{children:[Object(F.jsx)(He,{children:Object(F.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),Y){C(!1),O([]);var t=Y.filter((function(e){return e.Name==l||e.Code==l}));0!==t.length?O([{Code:t[0].Code,Name:t[0].Name,ClosingPrice:t[0].ClosingPrice,MonthlyAveragePrice:t[0].MonthlyAveragePrice,PE:t[0].PE,Dividend:t[0].Dividend}]):C(!0)}else M(!0)},children:[Object(F.jsx)(Ke,{placeholder:"\u8f38\u5165\u4e0a\u5e02\u80a1\u7968\u540d\u7a31/\u4ee3\u865f",onChange:function(e){return j(e.target.value)},onFocus:function(){C(!1),M(!1),j("")},value:l}),Object(F.jsx)(Qe,{children:"\u67e5\u8a62"})]})}),v&&Object(F.jsx)("h2",{children:"\u7121\u6548\u7684\u67e5\u8a62\uff0c\u8acb\u8f38\u5165\u6b63\u78ba\u4ee3\u865f\u6216\u540d\u7a31"}),D&&Object(F.jsx)("h2",{children:"\u8cc7\u6599\u5eab\u6709\u9ede\u5ef6\u9072\uff0c\u518d\u67e5\u8a62\u4e00\u6b21\uff01"}),p&&Object(F.jsxs)(xe,{children:[Object(F.jsxs)(pe,{children:[Object(F.jsxs)(Oe,{children:[p.map((function(e){return e.Name}))," ",p.map((function(e){return e.Code}))]}),Object(F.jsxs)(fe,{children:["\u66f4\u65b0\u6642\u9593 ",S]})]}),Object(F.jsxs)(ge,{children:[Object(F.jsxs)(me,{children:[Object(F.jsx)("p",{children:"\u80a1\u50f9"}),Object(F.jsx)("p",{children:p.map((function(e){return e.ClosingPrice}))})]}),Object(F.jsxs)(me,{children:[Object(F.jsx)("p",{children:"\u6708\u5747\u50f9"}),Object(F.jsx)("p",{children:p.map((function(e){return e.MonthlyAveragePrice}))})]}),Object(F.jsxs)(me,{children:[Object(F.jsx)("p",{children:"\u672c\u76ca\u6bd4"}),Object(F.jsx)("p",{children:p.map((function(e){return e.PE}))})]}),Object(F.jsxs)(me,{children:[Object(F.jsx)("p",{children:"\u6b96\u5229\u7387"}),Object(F.jsx)("p",{children:p.map((function(e){return e.Dividend}))})]})]}),i&&Object(F.jsx)(he,{onClick:function(){if(!K)return console.log("\u767b\u5165\u624d\u80fd\u52a0\u5230\u6700\u611b"),void I(!0);m.a.post("".concat(P,"/my-fav"),{username:K.username,stockCode:p[0].Code}).then((function(t){console.log("My fav code added!",t),e()}));var e=function(){m.a.post("".concat(P,"/my-fav2"),{username:K.username},{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){e.data.message?console.log(e.data.message):(console.log("post my fav2",e),V(e.data))}))}},children:"\u52a0\u5165\u8ffd\u8e64"}),i&&Object(F.jsx)(Ve,{onClick:function(){(A(!1),"\u4ee3\u865f"!=p[0].Code)?R.filter((function(e){return e.name==p[0].Name})).length>0||(q([{id:W.current,name:p[0].Name,price:p[0].ClosingPrice}].concat(Object(qe.a)(R))),W.current++):A(!0)},children:"\u52a0\u5165\u6bd4\u8f03"})]}),N&&Object(F.jsx)("h2",{children:"\u67e5\u8a62\u80a1\u7968\u5f8c\u518d\u52a0\u5165\u6bd4\u8f03\uff01"}),$&&Object(F.jsx)(ye,{children:"\u5148\u767b\u5165\u624d\u80fd\u52a0\u5165\u6700\u611b\uff01"}),R.filter((function(e){return e.id>0})).map((function(e){return Object(F.jsx)(xe,{children:Object(F.jsx)(pe,{children:Object(F.jsxs)(Oe,{children:[e.name," ",e.price]})})})}))]})})]})};var Xe=function(){var e=Object(u.useContext)(C),t=(e.myFav,e.setMyFav,Object(u.useContext)(w)),n=t.infoCompleted,c=(t.setInfoCompleted,Object(u.useContext)(k)),o=c.myFav2,r=(c.setMyFav2,Object(u.useState)([])),i=Object(x.a)(r,2),a=i[0],s=i[1],d=Object(u.useState)(!1),l=Object(x.a)(d,2),j=l[0],b=l[1],h=[],p=Object(u.useRef)(1);return Object(u.useEffect)((function(){n.length>1e3&&b(!0)}),[n]),Object(u.useEffect)((function(){j&&o.forEach((function(e){n.forEach((function(t){e.stock_code==t.Code&&(console.log(t.Code),h.push({id:p.current,Code:t.Code,Name:t.Name,ClosingPrice:t.ClosingPrice,MonthlyAveragePrice:t.MonthlyAveragePrice,PE:t.PE,Dividend:t.Dividend}),s(h),p.current++)}))}))}),[j]),Object(u.useEffect)((function(){o&&o.forEach((function(e){n.forEach((function(t){e.stock_code==t.Code&&(console.log(t.Code),h.push({id:p.current,Code:t.Code,Name:t.Name,ClosingPrice:t.ClosingPrice,MonthlyAveragePrice:t.MonthlyAveragePrice,PE:t.PE,Dividend:t.Dividend}),s(h),p.current++)}))}))}),[o]),Object(F.jsxs)("div",{children:[Object(F.jsx)("h1",{children:"\u6211\u7684\u6700\u611b\u80a1\u7968"}),a.filter((function(e){return e.id>0})).map((function(e){return Object(F.jsxs)(xe,{children:[Object(F.jsxs)(pe,{children:[Object(F.jsxs)(Oe,{children:[e.Name," ",e.Code]}),Object(F.jsxs)(fe,{children:["\u66f4\u65b0\u6642\u9593 ",S]})]}),Object(F.jsxs)(ge,{children:[Object(F.jsxs)(me,{children:[Object(F.jsx)("p",{children:"\u80a1\u50f9"}),Object(F.jsx)("p",{children:e.ClosingPrice})]}),Object(F.jsxs)(me,{children:[Object(F.jsx)("p",{children:"\u6708\u5747\u50f9"}),Object(F.jsx)("p",{children:e.MonthlyAveragePrice})]}),Object(F.jsxs)(me,{children:[Object(F.jsx)("p",{children:"\u672c\u76ca\u6bd4"}),Object(F.jsx)("p",{children:e.PE})]}),Object(F.jsxs)(me,{children:[Object(F.jsx)("p",{children:"\u6b96\u5229\u7387"}),Object(F.jsx)("p",{children:e.Dividend})]})]})]})}))]})};var Ze=function(){var e=Object(u.useState)([]),t=Object(x.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)([]),r=Object(x.a)(o,2),i=r[0],a=r[1],s=Object(u.useContext)(y),d=(s.user,s.setUser);return m.a.defaults.withCredentials=!0,Object(u.useEffect)((function(){m.a.get("".concat(P,"/login")).then((function(e){console.log(e.data.user),e.data.user&&d(e.data.user[0])}))}),[]),Object(F.jsx)("div",{className:"App",children:Object(F.jsxs)("div",{className:"registration",children:[Object(F.jsx)(ue,{children:"\u8a3b\u518a"}),Object(F.jsx)(je,{children:"\u5e33\u865f"}),Object(F.jsx)(le,{type:"text",placeholder:"\u8f38\u5165\u4f60\u7684\u5e33\u865f...",onChange:function(e){return c(e.target.value)},value:n}),Object(F.jsx)(je,{children:"\u5bc6\u78bc"}),Object(F.jsx)(le,{type:"text",placeholder:"\u8f38\u5165\u4f60\u7684\u5bc6\u78bc...",onChange:function(e){return a(e.target.value)},value:i}),Object(F.jsx)(be,{onClick:function(){m.a.post("".concat(P,"/register"),{username:n,password:i}).then((function(e){a(""),c("")}))},children:"\u7acb\u5373\u8a3b\u518a"})]})})};var et,tt,nt=function(){m.a.defaults.withCredentials=!0;var e=Object(u.useState)(null),t=Object(x.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)(null),r=Object(x.a)(o,2),i=r[0],a=r[1],s=Object(u.useState)(!1),d=Object(x.a)(s,2),l=d[0],j=d[1],b=Object(u.useState)([{status:0,type:"",message:""}]),h=Object(x.a)(b,2),p=h[0],O=h[1],f=Object(u.useState)(null),g=Object(x.a)(f,2),v=(g[0],g[1]),w=Object(u.useContext)(y),E=w.user,S=w.setUser,z=Object(u.useContext)(C),D=(z.myFav,z.setMyFav,Object(u.useContext)(k)),M=(D.myFav2,D.setMyFav2),T=Object(u.useState)(null),B=Object(x.a)(T,2),N=(B[0],B[1]);Object(u.useEffect)((function(){m.a.get("".concat(P,"/login")).then((function(e){console.log(e.data.user),e.data.user&&S(e.data.user[0])}))}),[]),Object(u.useEffect)((function(){E&&A()}),[E]),Object(u.useEffect)((function(){if(l){console.log("hi");var e=setTimeout((function(){j(!1)}),2300);return function(){return clearTimeout(e)}}}),[l]);var A=function(){m.a.post("".concat(P,"/my-fav2"),{username:E.username,password:i},{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){e.data.message?v(e.data.message):(console.log("post my fav2",e),M(e.data))}))},U=function(){O([])};return Object(F.jsx)("div",{className:"App",children:Object(F.jsxs)("div",{className:"login",children:[Object(F.jsx)(ue,{children:"\u767b\u5165"}),Object(F.jsx)(je,{children:"\u5e33\u865f"}),Object(F.jsx)(le,{type:"text",placeholder:"\u8f38\u5165\u4f60\u7684\u5e33\u865f...",onChange:function(e){return c(e.target.value)},onFocus:U,value:n}),Object(F.jsx)(je,{children:"\u5bc6\u78bc"}),Object(F.jsx)(le,{type:"text",placeholder:"\u8f38\u5165\u4f60\u7684\u5bc6\u78bc...",onChange:function(e){return a(e.target.value)},onFocus:U,value:i}),Object(F.jsx)(be,{onClick:function(){n&&i?m.a.post("".concat(P,"/login"),{username:n,password:i},{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){e.data.message?O({status:1,type:"post",message:"\u5e33\u865f\u6216\u5bc6\u78bc\u932f\u8aa4"}):(console.log("response",e),N(n),S(e.data[0]),j(!0),c(""),a(""))})):O({status:1,type:"empty",message:"\u586b\u5beb\u672a\u5b8c\u5168"})},children:" \u7acb\u523b\u767b\u5165 "}),1==p.status&&Object(F.jsx)(ye,{children:p.message}),l&&Object(F.jsx)(Ce,{children:"\u6210\u529f\u767b\u5165"}),E&&Object(F.jsxs)("h1",{children:["\u767b\u5165\u72c0\u614b\uff1a",E.username]})]})})},ct=(n(69),v.c.div(et||(et=Object(p.a)(["\n  padding-top: 64px;\n"])))),ot=Object(v.b)(tt||(tt=Object(p.a)(["\n  body {\n    background-color: ",";\n  }\n"])),(function(e){return e.theme.colors.grey}));var rt=function(){m.a.defaults.withCredentials=!0;var e=Object(u.useState)(null),t=Object(x.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)([]),r=Object(x.a)(o,2),i=r[0],a=r[1],s=Object(u.useState)([]),d=Object(x.a)(s,2),l=d[0],j=d[1],b=Object(u.useState)([]),p=Object(x.a)(b,2),g=p[0],v=p[1],E=Object(u.useState)([]),S=Object(x.a)(E,2),z=S[0],D=S[1],M=Object(u.useState)(!1),T=Object(x.a)(M,2),B=T[0],N=T[1],A=Object(u.useState)([]),U=Object(x.a)(A,2),G=U[0],$=U[1];Object(u.useEffect)((function(){m.a.get("".concat(P,"/login")).then((function(e){e.data.user&&c(e.data.user[0])})),_(),I()}),[]),Object(u.useEffect)((function(){n&&(console.log("getFav2"),L())}),[n]);var I=function(){m.a.get("".concat(P,"/my-fav")).then((function(e){var t=e.data.map((function(e){return e.stock_code}));console.log(t),v(t)}))},L=function(){m.a.post("".concat(P,"/my-fav2"),{username:n.username},{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){e.data.message?console.log(e.data.message):(console.log("post my fav2",e),D(e.data))}))};Object(u.useEffect)((function(){i.length>1e3&&N(!0)}),[i]),Object(u.useEffect)((function(){B&&R()}),[B]);var _=function(){fetch("https://secure-brook-06568.herokuapp.com/").then((function(e){return e.json()})).then((function(e){var t=e.stock_new,n=Object.values(t);a(n)})),fetch("https://tranquil-thicket-64578.herokuapp.com/").then((function(e){return e.json()})).then((function(e){var t=e.stock_pe;j(t)}))},R=function(){for(var e=i.map((function(e){return Object(h.a)({PE:"",Dividend:""},e)})),t=0;t<e.length;t++){for(var n=0;n<l.length;n++)e[t].Code==l[n].Code&&(e[t].PE=l[n].PEratio,e[t].Dividend=l[n].DividendYield);""==e[t].PE&&(e[t].PE="\u7121\u8cc7\u6599"),""==e[t].Dividend&&(e[t].Dividend="\u7121\u8cc7\u6599")}$(e)};return Object(F.jsx)(w.Provider,{value:{infoCompleted:G,setInfoCompleted:$},children:Object(F.jsx)(y.Provider,{value:{user:n,setUser:c},children:Object(F.jsx)(C.Provider,{value:{myFav:g,setMyFav:v},children:Object(F.jsxs)(k.Provider,{value:{myFav2:z,setMyFav2:D},children:[Object(F.jsx)(ot,{}),Object(F.jsx)(ct,{children:Object(F.jsxs)(O.a,{children:[Object(F.jsx)(de,{}),Object(F.jsxs)(f.c,{children:[Object(F.jsx)(f.a,{exact:!0,path:"/",children:Object(F.jsx)(Re,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/search",children:Object(F.jsx)(We,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/profile",children:Object(F.jsx)(Xe,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/register",children:Object(F.jsx)(Ze,{})}),Object(F.jsx)(f.a,{exact:!0,path:"/login",children:Object(F.jsx)(nt,{})})]})]})})]})})})})},it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),o(e),r(e),i(e)}))};b.a.render(Object(F.jsx)(v.a,{theme:{colors:{darkBlue:"#4F62C0",vividBlue:"#ADEAF1",grey:"#F8F7FC",darkGrey:"#383E5A"}},children:Object(F.jsx)(l.a.StrictMode,{children:Object(F.jsx)(rt,{})})}),document.getElementById("root")),it()}},[[70,1,2]]]);
//# sourceMappingURL=main.293de24e.chunk.js.map